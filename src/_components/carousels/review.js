import React, { useContext, Fragment } from 'react';
import Context from '../../_context';
import styled from 'styled-components';
import { Visible, Hidden } from 'react-grid-system';
import { CarouselProvider, Slider, Slide, ButtonBack, ButtonNext, Dot } from 'pure-react-carousel';
import 'pure-react-carousel/dist/react-carousel.es.css';

const RevieweCont = styled.div`
  position: relative;
  padding: 2rem;
  background-color: ${props => props.theme.main.primaryColor};
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-around;
  min-height: 500px;
  @media(min-width: 768px){
    flex-direction: row;
    min-height: 50vh;
    align-items: center;
    justify-content: space-around;
  }
`
const ReviewInnerCont = styled.div`
  @media(min-width: 768px){
    width: 50%;
  }
`
const ReviewAuthor = styled.p`
  font-weight: bold;
  text-align: center;
`
const ReviewDescription = styled.p`
  text-align: center;
`
const SvgCont = styled.svg`
  margin: 2rem 0;
`
const DotsCont = styled.div`
  position: absolute;
  border: 1px solid red;
  width: 90%;
  display: flex;
  justify-content: center;
`
const QuotationCont = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
`

const Review = ({ id, review, author }) => {
  return(
    <RevieweCont>
      <Visible xs>
        <QuotationCont>
          <SvgCont width="115" height="81" viewBox="0 0 115 81" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.21698 35.411L8.62914 35.6943L8.63483 35.6856L8.21698 35.411ZM30.8302 1V0.5H30.5605L30.4123 0.725409L30.8302 1ZM52 1L52.4551 1.20707L52.7768 0.5H52V1ZM36.1226 35.8957L35.6675 35.6886L35.4737 36.1147L35.886 36.3362L36.1226 35.8957ZM70.217 35.411L70.6291 35.6943L70.6348 35.6856L70.217 35.411ZM92.8302 1V0.5H92.5605L92.4123 0.725409L92.8302 1ZM114 1L114.455 1.20707L114.777 0.5H114V1ZM98.1226 35.8957L97.6675 35.6886L97.4737 36.1147L97.886 36.3362L98.1226 35.8957ZM24.0943 80.5C37.3913 80.5 47.2075 70.067 47.2075 55.7669H46.2075C46.2075 69.5772 36.7785 79.5 24.0943 79.5V80.5ZM0.5 55.7669C0.5 71.0709 11.3121 80.5 24.0943 80.5V79.5C11.8577 79.5 1.5 70.5119 1.5 55.7669H0.5ZM7.80491 35.1278C3.44404 41.4731 0.5 47.8726 0.5 55.7669H1.5C1.5 48.1519 4.32955 41.9502 8.62905 35.6942L7.80491 35.1278ZM30.4123 0.725409L7.79913 35.1365L8.63483 35.6856L31.248 1.27459L30.4123 0.725409ZM52 0.5H30.8302V1.5H52V0.5ZM36.5777 36.1028L52.4551 1.20707L51.5449 0.792929L35.6675 35.6886L36.5777 36.1028ZM47.2075 55.7669C47.2075 47.4021 43.7842 39.4443 36.3593 35.4552L35.886 36.3362C42.895 40.1017 46.2075 47.6532 46.2075 55.7669H47.2075ZM86.0943 80.5C99.3913 80.5 109.208 70.067 109.208 55.7669H108.208C108.208 69.5772 98.7785 79.5 86.0943 79.5V80.5ZM62.5 55.7669C62.5 71.0709 73.3121 80.5 86.0943 80.5V79.5C73.8577 79.5 63.5 70.5119 63.5 55.7669H62.5ZM69.8049 35.1278C65.444 41.4731 62.5 47.8726 62.5 55.7669H63.5C63.5 48.1519 66.3296 41.9502 70.629 35.6942L69.8049 35.1278ZM92.4123 0.725409L69.7991 35.1365L70.6348 35.6856L93.248 1.27459L92.4123 0.725409ZM114 0.5H92.8302V1.5H114V0.5ZM98.5778 36.1028L114.455 1.20707L113.545 0.792929L97.6675 35.6886L98.5778 36.1028ZM109.208 55.7669C109.208 47.4021 105.784 39.4443 98.3593 35.4552L97.886 36.3362C104.895 40.1017 108.208 47.6532 108.208 55.7669H109.208Z" fill="white"/>
          </SvgCont>          
          <SvgCont width="115" height="81" viewBox="0 0 115 81" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M106.783 45.589L106.371 45.3057L106.365 45.3144L106.783 45.589ZM84.1698 80V80.5H84.4395L84.5877 80.2746L84.1698 80ZM63 80L62.5449 79.7929L62.2232 80.5H63V80ZM78.8774 45.1043L79.3325 45.3114L79.5263 44.8853L79.114 44.6638L78.8774 45.1043ZM44.783 45.589L44.3709 45.3057L44.3652 45.3144L44.783 45.589ZM22.1698 80V80.5H22.4395L22.5877 80.2746L22.1698 80ZM1 80L0.544891 79.7929L0.223183 80.5H1V80ZM16.8774 45.1043L17.3325 45.3114L17.5263 44.8853L17.114 44.6638L16.8774 45.1043ZM90.9057 0.5C77.6087 0.5 67.7925 10.933 67.7925 25.2331H68.7925C68.7925 11.4228 78.2215 1.5 90.9057 1.5V0.5ZM114.5 25.2331C114.5 9.92912 103.688 0.5 90.9057 0.5V1.5C103.142 1.5 113.5 10.4881 113.5 25.2331H114.5ZM107.195 45.8722C111.556 39.5269 114.5 33.1274 114.5 25.2331H113.5C113.5 32.8481 110.67 39.0498 106.371 45.3058L107.195 45.8722ZM84.5877 80.2746L107.201 45.8635L106.365 45.3144L83.752 79.7254L84.5877 80.2746ZM63 80.5H84.1698V79.5H63V80.5ZM78.4223 44.8972L62.5449 79.7929L63.4551 80.2071L79.3325 45.3114L78.4223 44.8972ZM67.7925 25.2331C67.7925 33.5979 71.2158 41.5557 78.6407 45.5448L79.114 44.6638C72.105 40.8983 68.7925 33.3468 68.7925 25.2331H67.7925ZM28.9057 0.5C15.6087 0.5 5.79245 10.933 5.79245 25.2331H6.79245C6.79245 11.4228 16.2215 1.5 28.9057 1.5V0.5ZM52.5 25.2331C52.5 9.92912 41.6879 0.5 28.9057 0.5V1.5C41.1423 1.5 51.5 10.4881 51.5 25.2331H52.5ZM45.1951 45.8722C49.556 39.5269 52.5 33.1274 52.5 25.2331H51.5C51.5 32.8481 48.6704 39.0498 44.371 45.3058L45.1951 45.8722ZM22.5877 80.2746L45.2009 45.8635L44.3652 45.3144L21.752 79.7254L22.5877 80.2746ZM1 80.5H22.1698V79.5H1V80.5ZM16.4222 44.8972L0.544891 79.7929L1.45511 80.2071L17.3325 45.3114L16.4222 44.8972ZM5.79245 25.2331C5.79245 33.5979 9.21577 41.5557 16.6407 45.5448L17.114 44.6638C10.105 40.8983 6.79245 33.3468 6.79245 25.2331H5.79245Z" fill="white"/>
          </SvgCont>          
        </QuotationCont>
      </Visible>
      <Hidden xs>
        <SvgCont width="115" height="81" viewBox="0 0 115 81" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8.21698 35.411L8.62914 35.6943L8.63483 35.6856L8.21698 35.411ZM30.8302 1V0.5H30.5605L30.4123 0.725409L30.8302 1ZM52 1L52.4551 1.20707L52.7768 0.5H52V1ZM36.1226 35.8957L35.6675 35.6886L35.4737 36.1147L35.886 36.3362L36.1226 35.8957ZM70.217 35.411L70.6291 35.6943L70.6348 35.6856L70.217 35.411ZM92.8302 1V0.5H92.5605L92.4123 0.725409L92.8302 1ZM114 1L114.455 1.20707L114.777 0.5H114V1ZM98.1226 35.8957L97.6675 35.6886L97.4737 36.1147L97.886 36.3362L98.1226 35.8957ZM24.0943 80.5C37.3913 80.5 47.2075 70.067 47.2075 55.7669H46.2075C46.2075 69.5772 36.7785 79.5 24.0943 79.5V80.5ZM0.5 55.7669C0.5 71.0709 11.3121 80.5 24.0943 80.5V79.5C11.8577 79.5 1.5 70.5119 1.5 55.7669H0.5ZM7.80491 35.1278C3.44404 41.4731 0.5 47.8726 0.5 55.7669H1.5C1.5 48.1519 4.32955 41.9502 8.62905 35.6942L7.80491 35.1278ZM30.4123 0.725409L7.79913 35.1365L8.63483 35.6856L31.248 1.27459L30.4123 0.725409ZM52 0.5H30.8302V1.5H52V0.5ZM36.5777 36.1028L52.4551 1.20707L51.5449 0.792929L35.6675 35.6886L36.5777 36.1028ZM47.2075 55.7669C47.2075 47.4021 43.7842 39.4443 36.3593 35.4552L35.886 36.3362C42.895 40.1017 46.2075 47.6532 46.2075 55.7669H47.2075ZM86.0943 80.5C99.3913 80.5 109.208 70.067 109.208 55.7669H108.208C108.208 69.5772 98.7785 79.5 86.0943 79.5V80.5ZM62.5 55.7669C62.5 71.0709 73.3121 80.5 86.0943 80.5V79.5C73.8577 79.5 63.5 70.5119 63.5 55.7669H62.5ZM69.8049 35.1278C65.444 41.4731 62.5 47.8726 62.5 55.7669H63.5C63.5 48.1519 66.3296 41.9502 70.629 35.6942L69.8049 35.1278ZM92.4123 0.725409L69.7991 35.1365L70.6348 35.6856L93.248 1.27459L92.4123 0.725409ZM114 0.5H92.8302V1.5H114V0.5ZM98.5778 36.1028L114.455 1.20707L113.545 0.792929L97.6675 35.6886L98.5778 36.1028ZM109.208 55.7669C109.208 47.4021 105.784 39.4443 98.3593 35.4552L97.886 36.3362C104.895 40.1017 108.208 47.6532 108.208 55.7669H109.208Z" fill="white"/>
        </SvgCont>
      </Hidden>
      <ReviewInnerCont>
        <ReviewDescription>
          {review}
        </ReviewDescription>
        <ReviewAuthor>
          {author}
        </ReviewAuthor>
      </ReviewInnerCont>
      <Hidden xs>
        <SvgCont width="115" height="81" viewBox="0 0 115 81" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M106.783 45.589L106.371 45.3057L106.365 45.3144L106.783 45.589ZM84.1698 80V80.5H84.4395L84.5877 80.2746L84.1698 80ZM63 80L62.5449 79.7929L62.2232 80.5H63V80ZM78.8774 45.1043L79.3325 45.3114L79.5263 44.8853L79.114 44.6638L78.8774 45.1043ZM44.783 45.589L44.3709 45.3057L44.3652 45.3144L44.783 45.589ZM22.1698 80V80.5H22.4395L22.5877 80.2746L22.1698 80ZM1 80L0.544891 79.7929L0.223183 80.5H1V80ZM16.8774 45.1043L17.3325 45.3114L17.5263 44.8853L17.114 44.6638L16.8774 45.1043ZM90.9057 0.5C77.6087 0.5 67.7925 10.933 67.7925 25.2331H68.7925C68.7925 11.4228 78.2215 1.5 90.9057 1.5V0.5ZM114.5 25.2331C114.5 9.92912 103.688 0.5 90.9057 0.5V1.5C103.142 1.5 113.5 10.4881 113.5 25.2331H114.5ZM107.195 45.8722C111.556 39.5269 114.5 33.1274 114.5 25.2331H113.5C113.5 32.8481 110.67 39.0498 106.371 45.3058L107.195 45.8722ZM84.5877 80.2746L107.201 45.8635L106.365 45.3144L83.752 79.7254L84.5877 80.2746ZM63 80.5H84.1698V79.5H63V80.5ZM78.4223 44.8972L62.5449 79.7929L63.4551 80.2071L79.3325 45.3114L78.4223 44.8972ZM67.7925 25.2331C67.7925 33.5979 71.2158 41.5557 78.6407 45.5448L79.114 44.6638C72.105 40.8983 68.7925 33.3468 68.7925 25.2331H67.7925ZM28.9057 0.5C15.6087 0.5 5.79245 10.933 5.79245 25.2331H6.79245C6.79245 11.4228 16.2215 1.5 28.9057 1.5V0.5ZM52.5 25.2331C52.5 9.92912 41.6879 0.5 28.9057 0.5V1.5C41.1423 1.5 51.5 10.4881 51.5 25.2331H52.5ZM45.1951 45.8722C49.556 39.5269 52.5 33.1274 52.5 25.2331H51.5C51.5 32.8481 48.6704 39.0498 44.371 45.3058L45.1951 45.8722ZM22.5877 80.2746L45.2009 45.8635L44.3652 45.3144L21.752 79.7254L22.5877 80.2746ZM1 80.5H22.1698V79.5H1V80.5ZM16.4222 44.8972L0.544891 79.7929L1.45511 80.2071L17.3325 45.3114L16.4222 44.8972ZM5.79245 25.2331C5.79245 33.5979 9.21577 41.5557 16.6407 45.5448L17.114 44.6638C10.105 40.8983 6.79245 33.3468 6.79245 25.2331H5.79245Z" fill="white"/>
        </SvgCont>
      </Hidden>
    </RevieweCont>
  )
}


export default ()=> {
  const state = useContext(Context);
  const items = state.home.reviews.items;
  const color = state.main.primaryColor;
  return(
    <Fragment>
      <Hidden xs>
        <CarouselProvider
          naturalSlideWidth={100}
          isIntrinsicHeight={true}
          totalSlides={items.length}
          visibleSlides={1}
          orientation="horizontal"
          isPlaying={true}
        >
          <Slider>
            {
              items.map((item, index) => (
                <Slide key={item.id} index={index}>
                  <Review {...item} />
                </Slide>
              ))
            }
          </Slider>
        </CarouselProvider>
      </Hidden>
      <Visible xs>
        <CarouselProvider
          naturalSlideWidth={100}
          isIntrinsicHeight={true}
          totalSlides={items.length}
          visibleSlides={1}
          orientation="horizontal"
          isPlaying={true}
        >
          <Slider>
            {
              items.map((item, index) => (
                <Slide key={item.id} index={index}>
                  <Review {...item} />
                </Slide>
              ))
            }
          </Slider>
          {
            Array(items.length).fill(0).map((_,i) => <Dot style={{ backgroundColor: color }} className="carousel-text-dot" key={i} slide={i} />)
          }
        </CarouselProvider>
      </Visible>
    </Fragment>
  )
}